name: Godot Unit Tests
run-name: GUT run by ${{ github.actor }} due to ${{ github.event_name }} (${{ github.ref_name }})
on: [push]
jobs:
  Godot-Unit-Tests:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/hypasist/godot4-gut-testing:main
      env:
        NODE_ENV: development
    steps:
      - run: echo "Testing ${{ github.repository }}/${{ github.ref }} on ${{ runner.os }} server hosted by GitHub!"
      - name: Fantalone repository checkout
        id: fantalone-checkout
        uses: actions/checkout@v4
        with:
          repository: ${{ github.repository }}
          path: Fantalone
      - name: Check out repository code
        id: checkouts
        uses: actions/checkout@v4
        with:
          repository: bitwes/Gut
          path: gut
      - run: echo "ðŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "NODE_ENV $NODE_ENV"
      - name: List files in the repository
        run: pwd && ls && echo $GITHUB_WORKSPACE && echo ${{ github.workspace }}
      #- run: echo "Job's status is ${{ job.status }}."
      - name: Run the tests
        id: testing
        uses: Hypasist/godot4-gut-testing@v0.5
      #  with:
      #    who-to-greet: 'Shelob, Child of Ungoliant'
      # Use the output from the `hello` step
      - name: Summary
        run: echo "Checkout time ${{ steps.checkout.outputs.time }}\nTesting time ${{ steps.testing.outputs.time }}."
