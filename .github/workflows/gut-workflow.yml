name: Godot Unit Testing
run-name: GUT run by ${{ github.actor }} due to ${{ github.event_name }} (${{ github.ref_name }})
on: [push]
jobs:
  Godot-Unit-Tests:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/hypasist/godot4-gut-testing:main
      env:
        NODE_ENV: development
    steps:
      - run: "Testing ${{ github.repository }}/${{ github.ref }} on ${{ runner.os }} server hosted by GitHub!"
      - name: Fantalone repository checkout
        uses: actions/checkout@v4
        with:
          repository: ${{ github.repository }}
          path: Fantalone
      - name: GUT repository checkout
        uses: actions/checkout@v4
        with:
          repository: bitwes/Gut
          path: gut
      - name: Run the tests
        uses: Hypasist/godot4-gut-testing@v0.5
        with:
          gutConfigpath: test/.gutconfig.json
          extraGodotFlags: '--headless'
          importGodotResources: true
